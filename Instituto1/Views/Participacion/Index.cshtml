@model ParticipacionViewModel
@{ ViewData["Title"] = "Participación por Curso"; }

<div class="card">
    <h2>Participación y Matrículas por Curso</h2>

    <form method="get">
        <div class="filter-bar">
            <div class="filter-group">
                <label>Categoría</label>
                <select name="categoria">
                    <option value="">Todas</option>
                    @foreach (var cat in Model.Categorias)
                    {
                        <option value="@cat" selected="@(Model.Categoria == cat)">@cat</option>
                    }
                </select>
            </div>
            <div class="filter-group">
                <label>Estado Matrícula</label>
                <select name="estado">
                    <option value="">Todos</option>
                    <option value="Finalizado" selected="@(Model.Estado=="Finalizado")">Finalizado</option>
                    <option value="En curso"   selected="@(Model.Estado=="En curso")">En Curso</option>
                    <option value="Retirado"   selected="@(Model.Estado=="Retirado")">Retirado</option>
                </select>
            </div>
            <div class="filter-group" style="max-width:140px;">
                <label>&nbsp;</label>
                <button type="submit" class="btn">Filtrar</button>
            </div>
        </div>
    </form>

    @if (Model.Resultados.Any())
    {
        <div class="table-responsive">
            <table>
                <thead>
                    <tr>
                        <th>Curso</th><th>Categoría</th><th>Total Matrículas</th>
                        <th>Finalizados</th><th>Retirados</th><th>En Curso</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var r in Model.Resultados)
                    {
                        <tr>
                            <td>@r.NombreCurso</td>
                            <td>@r.Categoria</td>
                            <td><strong>@r.TotalMatriculas</strong></td>
                            <td><span class="badge badge-success">@r.Finalizados</span></td>
                            <td><span class="badge badge-danger">@r.Retirados</span></td>
                            <td><span class="badge badge-info">@r.EnCurso</span></td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
    else { <p class="empty-msg">No se encontraron resultados con los filtros aplicados.</p> }
</div>
